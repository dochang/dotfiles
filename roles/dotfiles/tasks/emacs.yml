- include: dotdir.yml
  with_items:
    - src: 'emacs/packages.el'
      dest: '~/.emacs.d/packages.el'
    - src: 'emacs/bootstrap.el'
      dest: '~/.emacs.d/bootstrap.el'
    - src: 'emacs/init.el'
      dest: '~/.emacs.d/init.el'
    - src: 'gnus/gnus.el'
      dest: '~/.gnus.el'

- name: ensure ~/.emacs.d/{{ item }} present
  file:
    path: '~/.emacs.d/{{ item }}'
    state: directory
  with_items:
    - init.d
    - site-lisp
    - themes

- name: install emacs site files
  copy:
    dest: '~/.emacs.d/{{ item | relpath("emacs") }}'
    src: '{{ item }}'
  with_fileglob:
    - emacs/site-lisp/*.el
    - emacs/themes/*.el

- name: install emacs *.el files
  template:
    dest: '~/.emacs.d/{{ item | relpath("emacs") }}'
    src: '{{ item }}'
  with_fileglob:
    - emacs/init.d/*.el
