---

- name: Install utils
  command: >-
    go get
    {{ (pkg_state == "latest") | ternary("-u", "") }}
    {{ item.1 }}
  environment:
    GOENV_VERSION: '{{ item.0 }}'
    CGO_ENABLED: 0
  notify:
    - goenv rehash
  with_nested:
    - '{{ envs.goenv.versions }}'
    - '{{ envs.goenv.packages }}'

- name: Install go linters
  command: >-
    gometalinter --install
    {{ (pkg_state == "latest") | ternary("--update", "") }}
  environment:
    CGO_ENABLED: 0
  notify:
    - goenv rehash
